{"apiVersion":"networking.k8s.io/v1","kind":"Ingress","metadata":{"annotations":{"nginx.ingress.kubernetes.io/service-upstream":"true"},"generation":13,"name":"bl003.com"},"spec":{"rules":[{"host":"bl080.com","http":{"paths":[{"backend":{"service":{"name":"device-selector","port":{"number":80}}},"path":"/","pathType":"ImplementationSpecific"}]}}]}}
{"apiVersion":"networking.k8s.io/v1","kind":"Ingress","metadata":{"annotations":{"nginx.ingress.kubernetes.io/rewrite-target":"/$1","nginx.ingress.kubernetes.io/server-snippet":"set $maintain 0; set $c_ip $remote_addr; set $flag \"0\"; if ( $maintain = 1 ) {\n    set $flag \"${flag}1\";\n} if ( $request_uri !~* (/maintain/) ) {\n    set $flag \"${flag}2\";\n\n} if ($c_ip !~* ^(139.59.230.195|27.124.35.72|202.131.86.22|180.178.48.90)) {\n    set $flag \"${flag}3\";\n} if ( $flag = \"0123\" ){  \n    rewrite ^(.*) \"https://mt.bl003.com/maintain/index.html?ip=${c_ip}&time=2022-04-16%2016:00:00[GTM+7]&interval=20&url=https://bl003.com/\" permanent;\n}    \n add_header X_MT $flag;\n","nginx.ingress.kubernetes.io/service-upstream":"true"},"generation":5,"name":"maintain"},"spec":{"rules":[{"host":"www.bl080.com"},{"host":"m.bl080.com"}],"tls":[{"hosts":["www.bl080.com","m.bl080.com"],"secretName":"bl003-com"}]}}
